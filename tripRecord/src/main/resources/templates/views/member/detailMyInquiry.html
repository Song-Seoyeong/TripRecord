<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>내 문의글 자세히보기</title>
<style>
	#revision_button{color:white; background-color: #96CAF0; width: 160px; height:40px; border: none; border-radius:20px; margin-right: 5px;}
	#list_button{color:white; background-color: #96CAF0; width: 160px; height:40px; border: none; border-radius:20px; margin-right: 5px;}
	#delete_button{color:white; background-color: #FF203A; width: 160px; height:40px; border: none; border-radius:20px; margin-right: 5px;}
	
	.image-gallery {display: flex; flex-wrap: wrap; margin-left:230px;}
	.image-container {position: relative; width:270px; margin: 5px;}
	.image-container img {display: block; max-width: 270px; cursor: pointer; }
	.more-images {display: flex; align-items: center; justify-content: center; width: 270px; height: 200px; background: rgba(0, 0, 0, 0.5); color: white; font-size: 24px; cursor: pointer;}
	.modal {display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); justify-content: center; align-items: center;}
	.modal img {max-width: 80%; max-height: 80%;}
	#imgReview{margin: 50px auto;}
	#placeImg{width:100%; margin: 20px auto;}
	
</style>
</head>
<body>
	<!-- 헤더 -->
	<div th:replace="~{common/logoBar :: logoBar }"></div>
	<div th:replace="~{common/mainCategoryBar :: mainCategoryBar}"></div>
	<!--마이페이지 어퍼바-->
	<div th:replace="~{common/myPageUpperBar :: myPageUpperBar}"></div>
	<div class="flex-container" style="text-align:center; margin-left:auto;">
		<div style="height:80px;"></div>
		<!-- 문의글 작성 공간 -->	
		<div style="margin:auto; width:900px; height:450px; border:1px solid #b9b9b9; border-radius:10px;">
			<!-- 문의글 타이틀 -->
			<div id="inquiryTitle" style="margin-top:20px; color: black; font-size: 30px; font-weight: 800; text-align:center;">
				문의글 입니다.
			</div>
			<div style="margin-top:15px; margin-left:auto; margin-right:auto; width:90%; border:2px solid #96CAF0"></div>
			<!-- 문의글 내용 -->
			<div id="inquiryContent" style="margin-left:40px; margin-top:10px; font-size:20px;">상추를 치료해줄 사람어디 없나</div> 
		</div>
		
		<!-- 사진자리 -->
		<div id='imgReview'>
			<h3>관련 사진&#x1F4F8;</h3>
			<div id="placeImg" class="container">
			    <div class="image-gallery" id="image-gallery">
			        <div class="image-container"><img src="image/insadong1.jpg" alt="Image 1"></div>
			        <div class="image-container"><img src="image/insadong2.jpg" alt="Image 2"></div>
			        <div class="image-container"><img src="image/insadong3.jpg" alt="Image 3"></div>
			        <div class="image-container"><img src="image/insadong4.jpg" alt="Image 4"></div>
			    </div>
			</div>
		</div>
		<!-- 이미지 모달 -->
		<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
		    <div class="modal-dialog modal-lg modal-dialog-centered">
		        <div class="modal-content">
		            <div class="modal-header">
		                <h5 class="modal-title" id="imageModalLabel">사진</h5>
		                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		            </div>
		            <div class="modal-body">
		                <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
		                    <div class="carousel-indicators">
		                        <!-- Indicators will be inserted here by JavaScript -->
		                    </div>
		                    <div class="carousel-inner">
		                        <!-- Carousel items will be inserted here by JavaScript -->
		                    </div>
		                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
		                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
		                        <span class="visually-hidden">Previous</span>
		                    </button>
		                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
		                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
		                        <span class="visually-hidden">Next</span>
		                    </button>
		                </div>
		            </div>
		        </div>
		    </div>
		</div>
		<div style="height:40px;"></div>
		<!-- 제출버튼 -->
		<div>
			<button id="revision_button" onclick="revision()">수정</button>
			<button id="list_button" onclick="list()">목록</button>
			<button id="delete_button" onclick="#">삭제</button>
		</div>
	</div>
	
	<div style="margin-bottom: 1300px"></div>
	
	<!-- 푸터 -->
	<div th:replace="~{common/footer :: footer}" ></div>
	<script>
		//수정 시 피드백 페이지로 이동
		function revision(){
			location.href="updateInquiry.me"
		}
		//목록 이동
		function list(){
			location.href="myInquiry.me"
		}
		//이미지
		document.addEventListener('DOMContentLoaded', function() {
	        const gallery = document.getElementById('image-gallery');
	        const images = gallery.querySelectorAll('.image-container img');
	        const modal = new bootstrap.Modal(document.getElementById('imageModal'));
	        const carouselIndicators = document.querySelector('.carousel-indicators');
	        const carouselInner = document.querySelector('.carousel-inner');
	
	        images.forEach((img, index) => {
	            const indicator = document.createElement('button');
	            indicator.type = 'button';
	            indicator.setAttribute('data-bs-target', '#carouselExampleIndicators');
	            indicator.setAttribute('data-bs-slide-to', index);
	            if (index === 0) indicator.classList.add('active');
	            carouselIndicators.appendChild(indicator);
	
	            const carouselItem = document.createElement('div');
	            carouselItem.classList.add('carousel-item');
	            if (index === 0) carouselItem.classList.add('active');
	
	            const carouselImage = document.createElement('img');
	            carouselImage.src = img.src;
	            carouselImage.classList.add('d-block', 'w-100');
	            carouselItem.appendChild(carouselImage);
	
	            carouselInner.appendChild(carouselItem);
	
	            img.addEventListener('click', () => {
	                modal.show();
	                $('#carouselExampleIndicators').carousel(index);
	            });
	        });
	
	        if (images.length > 2) {
	            for (let i = 2; i < images.length; i++) {
	                images[i].parentElement.style.display = 'none';
	            }
	
	            const moreImages = document.createElement('div');
	            moreImages.classList.add('more-images');
	            moreImages.innerText = `더보기`;
	            gallery.appendChild(moreImages);
	
	            moreImages.addEventListener('click', () => {
	                modal.show();
	                $('#carouselExampleIndicators').carousel(2);
	            });
	        }
	        
	        document.getElementById('backButton').addEventListener('click', ()=>{
	        	location.href='placeDetail.pla'
	        })
	        
	    });
	</script>
</body>
</html>