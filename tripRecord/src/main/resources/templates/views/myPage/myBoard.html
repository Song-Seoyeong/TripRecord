<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>내 문의 글</title>
<style>
table {
	width: 80%;
	align: center;
	text-align: center;
	margin-left: auto;
	margin-right: auto;
	margin-top: 30px;
}

.pageNumber {
	margin-left: 5px;
	margin-right: 5px;
}

th {
	font-size: 24px;
}

td {
	padding: 15px;
}

.hidden {
	display: none;
}

/*결제 취소*/
/* From Uiverse.io by cssbuttons-io */
#payCancle {
	width: 80px;
	height: 40px;
	cursor: pointer;
	display: flex;
	align-items: center;
	background: red;
	border: none;
	border-radius: 20px;
	box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.15);
	background: #e62222;
}

#payCancle, button span {
	transition: 200ms;
}

#payCancle .text {
	transform: translateX(5px);
	color: white;
	font-weight: bold;
	padding-left: 7px;
}

#payCancle .icon {
	position: absolute;
	transform: translateX(110px);
	height: 40px;
	width: 40px;
	display: flex;
	align-items: center;
	justify-content: center;
}

#payCancle svg {
	width: 15px;
	fill: white;
}

#payCancle:hover {
	background: #ff3636;
}

#payCancle:hover .text {
	color: transparent;
}

#payCancle:hover .icon {
	width: 70px;
	border-left: none;
	transform: translateX(0);
}

#payCancle:focus {
	outline: none;
}

#payCancle:active .icon svg {
	transform: scale(0.8);
}
</style>
</head>
<body>
	<!-- 헤더 -->
	<div th:replace="~{common/logoBar :: logoBar }"></div>
	<div th:replace="~{common/mainCategoryBar :: mainCategoryBar}"></div>
	<!--마이페이지 어퍼바-->
	<div th:replace="~{common/myPageUpperBar :: myPageUpperBar}"></div>

	<div style="height: 120px;">
		<!-- 사이드바 -->
		<div id="sidebar">
			<div th:replace="~{common/myBoardSidebar :: myBoardSideBar}"></div>
		</div>
	</div>
	<th:block th:if="${wholeReview} != wholeReview">
		<div class="flex-container"
			style="text-align: center; margin-left: auto;">
			<div style="display: inline-block;">
				<span class="secondSidebar"><a class="nav-link"
					href="myBoard.mp">커뮤니티</a></span> <span class="secondSidebar"><a
					class="nav-link" href="myReview.mp">작성후기</a></span>
				<div style="color: black; font-size: 36px; font-weight: 900;">내
					게시글</div>
				<div style="height: 40px;"></div>
				<div
					style="margin: auto; width: 1200px; overflow: auto; border: 1px solid lightgray; border-radius: 10px;">
					<table>
						<thead>
							<tr style="border-bottom: 2px solid #96CAF0;">
								<th>글번호</th>
								<th>말머리</th>
								<th>제목</th>
								<th>작성자</th>
								<th>작성일자</th>
							</tr>
						</thead>
						<tbody>
							<tr style="border-bottom: 2px solid #b9b9b9" th:each="a: ${aList}">
								<td>[[${a.boardNo}]]<input type="hidden" value="board"></td>
								<td><input type="hidden" th:value="${a.generalType}">
									[[${a.generalType}=='GIVE' ? '양도' : (${a.generalType}=='REVIEW'
									? '후기': '동행')]]</td>
								<td>[[${a.boardTitle}]]</td>
								<td>[[${a.memberName}]]</td>
								<td>[[${a.boardModifyDate}]]</td>
							</tr>
						</tbody>
					</table>

					<!-- 페이지네이션 -->
					<div class="text-center"
						style="margin-top: 50px; text-align: center;" th:with="loc=${loc}">
						<ul class="pagination">
							<!-- 이전링크 -->
							<li style="margin-left: auto;"><a class="movePage"
								th:href="@{${loc}(page=${pi.currentPage-1})}"
								aria-label="Previous"
								th:classAppend="${pi.currentPage == pi.startPage ? 'hidden' : ''}">&lt;</a>
							</li>
							<!-- 번호 이동 -->
							<li class="pageNumber"
								th:each="p:${#numbers.sequence(pi.startPage, pi.endPage)}">
								<th:block th:if="${pi.endPage != 0}">
									<a class="movePage" th:href="@{${loc}(page=${p})}"
										th:text="${p}"></a>
								</th:block>
							</li>
							<!-- 다음링크 -->
							<li style="margin-right: auto;"><th:block
									th:if="${pi.endPage != 0}">
									<a class="movePage"
										th:href="@{${loc}(page=${pi.currentPage+1})}"
										aria-label="Next"
										th:classAppend="${pi.currentPage == pi.endPage ? 'hidden' : ''}">&gt;</a>
								</th:block></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</th:block>

	<th:block th:if="${wholeReview} == wholeReview">
		<div class="flex-container"
			style="text-align: center; margin-left: auto;">
			<div style="display: inline-block;">
				<span class="secondSidebar"><a class="nav-link"
					href="myBoard.mp">커뮤니티</a></span> <span class="secondSidebar"><a
					class="nav-link" href="myReview.mp">작성후기</a></span>
				<div style="color: black; font-size: 36px; font-weight: 900;">내
					게시글</div>
				<div style="height: 40px;"></div>
				<div
					style="margin: auto; width: 1200px; overflow: auto; border: 1px solid lightgray; border-radius: 10px;">
					<table>
						<thead>
							<tr style="border-bottom: 2px solid #96CAF0;">
								<th>글번호</th>
								<th>말머리</th>
								<th>제목</th>
								<th>별점</th>
							</tr>
						</thead>
						<tbody>
							<tr style="border-bottom: 2px solid #b9b9b9" th:each="r: ${rList}">
								<td>[[${r.reviewNo}]]<input type="hidden" value="review"></td>
								<td>[[${r.revRefType} == 'PLACE' ? '장소' : '플래너']] <input
									type="hidden" th:value="${r.revRefNo}" /> <input type="hidden"
									th:value="${r.contentTypeId}" /> <input type="hidden"
									th:value="${r.localNo}" /> <input type="hidden"
									th:value="${r.reviewNo}" />
								</td>
								<td>[[${r.reviewTitle}]]</td>
								<td>[[${r.reviewStar}]]</td>
							</tr>
						</tbody>
					</table>

					<!-- 페이지네이션 -->
					<div class="text-center"
						style="margin-top: 50px; text-align: center;" th:with="loc=${loc}">
						<ul class="pagination">
							<!-- 이전링크 -->
							<li style="margin-left: auto;"><a class="movePage"
								th:href="@{${loc}(page=${pi.currentPage-1})}"
								aria-label="Previous"
								th:classAppend="${pi.currentPage == pi.startPage ? 'hidden' : ''}">&lt;</a>
							</li>
							<!-- 번호 이동 -->
							<li class="pageNumber"
								th:each="p:${#numbers.sequence(pi.startPage, pi.endPage)}">
								<th:block th:if="${pi.endPage != 0}">
									<a class="movePage" th:href="@{${loc}(page=${p})}"
										th:text="${p}"></a>
								</th:block>
							</li>
							<!-- 다음링크 -->
							<li style="margin-right: auto;"><th:block
									th:if="${pi.endPage != 0}">
									<a class="movePage"
										th:href="@{${loc}(page=${pi.currentPage+1})}"
										aria-label="Next"
										th:classAppend="${pi.currentPage == pi.endPage ? 'hidden' : ''}">&gt;</a>
								</th:block></li>
						</ul>
					</div>
				</div>
				<div style="height: 10px"></div>
				<div style="width: 1200px;">
					<button id="payCancle" class="noselect" style="float: right">
						<span class="text">글삭제</span> <span class="icon"> <svg
								xmlns="http://www.w3.org/2000/svg" width="24" height="24"
								viewBox="0 0 24 24">
							<path
									d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path>
						</svg>
						</span>
					</button>
				</div>
			</div>
		</div>
	</th:block>

	<div style="margin-bottom: 300px"></div>
	<!-- 푸터 -->
	<div th:replace="~{common/footer :: footer}"></div>
	<script th:inline="javascript">
		/*<![CDATA[*/
		//상세글 보기
		const tds = document.querySelectorAll('td');
		for(const td of tds){
			//마우스오버시 게시글 목록 배경 변환	
			td.addEventListener('mouseover',function(){
				const parent = td.parentElement;
				parent.style.backgroundColor='#ECEBEB';
				parent.style.cursor='pointer';
			})
			//마우스아웃 시 게시글 목록 배경 변환
			td.addEventListener('mouseout',function(){
				const parent = td.parentElement;
				parent.style.backgroundColor='white';
			})
			td.addEventListener('click', function(){
				if(this.parentElement.children[0].children[0].value == 'review'){
					const contentid = this.parentElement.children[1].children[0].value;
					const contenttypeid = this.parentElement.children[1].children[1].value;
					const areacode = this.parentElement.children[1].children[2].value;
					const reviewNo = this.parentElement.children[1].children[3].value;
					location.href = 'placeReviewDetail.pla?contentid=' + contentid + "&contenttypeid=" + contenttypeid + "&areacode=" + areacode + "&reviewNo=" + reviewNo + "&myPage=myPage" +"&page=" + /*[[${pi.currentPage}]]*/  ;
				}else if(this.parentElement.children[0].children[0].value == 'board'){
					const parent = td.parentElement;
					const boardNo = parent.children[0].innerText;
					const generalType = parent.children[1].children[0].value;
					location.href='commuSelect.bo?boardNo=' + boardNo + '&generalType='+ generalType + '&myPage=myPage' + '&page='+ /*[[${pi.currentPage}]]*/1;
				}
					
			})
				
		}
		/*]]>*/
		
		// 체크박스 모두 선택
		document.querySelector('input[id="checkAll"]').addEventListener('change', function() {
		    const checkboxes = document.querySelectorAll('input[name="reviewNoList"]');
		    checkboxes.forEach(checkbox => {
		        checkbox.checked = this.checked;
		    });
		    updateTotals();
		});
		
	</script>
</body>