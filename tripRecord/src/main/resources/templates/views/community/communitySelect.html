<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>게시글 상세 조회</title>
<link type="text/css" href="css/community/communitySelect.css" rel="stylesheet">
<script  src="http://code.jquery.com/jquery-latest.min.js"></script>
<style>



</style>
</head>
<body>
	<div th:replace="~{ common/logoBar :: logoBar }"></div>
	<div th:replace="~{ common/mainCategoryBar :: mainCategoryBar }"></div>

	<div class="text-center" style="padding-top:60px;">
		<b style="font-size:70px;">전국</b>
	</div>
	
	<div id='content'>
		<div id="content1-div" class="container">
			<input id="search-com" type="text" placeholder="검색어를 입력해주세요">
			<img class="x-icon" alt="" src="image/Search.png">
		</div>
	</div>
	
<!-- 사이드 바 -->
		<div id="sidebar">
			<div class="arrow" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions">
				<div class="arrow-top"></div>
				<div class="arrow-bottom"></div>
			</div>
	
	
			<div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions" aria-labelledby="offcanvasWithBothOptionsLabel">
				<div class="offcanvas-header">
					<h5 class="offcanvas-title" id="staticBackdropLabel">지역</h5>
					<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<p>- 전국</p>
				<p>- 서울</p>
				<p>- 부산</p>
				<p>- 대구</p>
				<p>- 인천</p>
				<p>- 광주</p>
				<p>- 대전</p>
				<p>- 울산</p>
				<p>- 세종</p>
				<p>- 경기</p>
				<p>- 강원</p>
				<p>- 충북</p>
				<p>- 충남</p>
				<p>- 경북</p>
				<p>- 경남</p>
				<p>- 전북</p>
				<p>- 전남</p>
				<p>- 제주</p>
				</div>
			</div>
		</div> 
<!-- 사이드 바 -->
	
	
	
	<div id="commu-select" class="row">
		<div class="col-3">
			<div style="border-radius:9999px; background-color:#96caf0;">
				전체
			</div>
		</div>
		<div class="col-3"><div>동행</div></div>
		<div class="col-3"><div>양도</div></div>
		<div class="col-3"><div>후기</div></div>
	</div>
	
	
	
	<div id='content2'>
		<div class="text-center" style="padding:30px;">
			<b style="font-size:40px;">[[${b.boardTitle}]]</b>
		</div>
		<div class='row' style="padding:30px; border-bottom:5px solid #96caf0;">
			<div class="col-2">
				<img src="#">
				[[${b.nickname}]]
			</div>
			<div class="col-9"></div>
			<div class="col-1">작성일</div>
		</div>
		<div class='text-start' id='placeContent'>
			[[${b.boardContent}]]
		</div>
		
		
		<!-- 이미지들 -->
		<div id="placeImg" class="container">
			<h2>관련 사진 &#x1F4F8;</h2>
		    <div class="image-gallery" id="image-gallery">
		        <div class="image-container" th:each=" i, iStat : ${ iList }">
		        	<img th:src="|https://drive.google.com/thumbnail?id=${i.imageRename}&sz=w1000|" th:alt="|Image ${iStat.count}|">
		        </div>
		    </div>
		</div>
	</div>
	
	
	<input type="hidden" th:value="${b.boardNo}">
	<div class="text-center row">
		<div class="col-4"></div>
		<div class="col-1" style="margin:auto;">
			<a href="commuEdit.bo">
				<button class="btn edit-btn">수정</button>
			</a>
		</div>
		<div class="col-1" style="margin:auto;">
			<a href="community.bo">
				<button class="btn edit-btn">목록</button>
			</a>
		</div>
		<div class="col-1" style="margin:auto;">
			<button class="btn del-btn">삭제</button>
		</div>
		<div class="col-4"></div>
	</div>
	<hr>
	
	
	
	<!-- 이미지 모달 -->
	<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
	    <div class="modal-dialog modal-lg modal-dialog-centered">
	        <div class="modal-content">
	            <div class="modal-header">
	                <h5 class="modal-title" id="imageModalLabel">사진</h5>
	                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	            </div>
	            <div class="modal-body">
	                <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
	                    <div class="carousel-indicators">
	                        <!-- Indicators will be inserted here by JavaScript -->
	                    </div>
	                    <div class="carousel-inner">
	                        <!-- Carousel items will be inserted here by JavaScript -->
	                    </div>
	                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
	                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
	                        <span class="visually-hidden">Previous</span>
	                    </button>
	                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
	                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
	                        <span class="visually-hidden">Next</span>
	                    </button>
	                </div>
	            </div>
	        </div>
	    </div>
	</div>
	<!-- 이미지 모달 -->
	
	
	
	
	
	
	<!-- 댓글 -->
	
	<div class="container py-4">
		<div class="bd-example-snippet bd-code-snippet">
			<div class="bd-example" style="border:none;">
				<table class="table table-hover">
					<thead>
						<tr>
							<th width="80px">번호</th>
							<th width="600px">댓글 내용</th>
							<th width="130px">작성자</th>
							<th width="130px">작성일자</th>
							<th width="25px" style="border:none;">수</th>
							<th width="25px" style="border:none;">삭</th>
	          			</tr>
	          		</thead>
	         		<tbody id="text-test">
	         		<!-- 이거 반복 -->
	          			<tr th:each=" r : ${rList}">
	            			<td>[[${ r.replyNo }]]</td>
	            			<td>[[${ r.replyContent }]]</td>
	            			<td>[[${ r.nickName }]]</td>
	            			<td>[[${ r.replyModifyDate }]]</td>
	            			<td style="border:none;">
	          					<img src="#" width="20px"><!-- src=썸네일사진 -->
	          				</td>
	          				<td style="border:none;">
	          					<img src="#" width="20px">
	          				</td>
	          			</tr>
	          		</tbody>
	        	</table>
	       	</div>
		</div>
		<!-- 댓글 -->
		
        <br>
		<div id='reviewContent'>
			<h3>댓글 작성</h3>
			<br>
			<div id='profile' class='text-start'>
				<div id='profileImg' class="col-1">
					<img src='image/profile.png'/>
				</div>
				<div>[[${session.loginUser.nickname}]]&nbsp;&nbsp;&nbsp;</div>
				<textArea name='reviewContent' id='content3' placeholder='내용을 입력하세요' class='reviewInput' required></textArea>
				<button type="button" class="btn btn-primary" id='insert'>등록</button>
			</div>
		</div>
		<!-- 페이징 -->
		<a href="commuWrite.bo">커뮤 글쓰기로 이동 임시</a>


		<div th:if="${ session.loginUser != null}">
	       	<button class="btn btn-outline-success" type="button" onclick="location.href='commuWrite.bo'">WRITE BOARD</button>
	    </div>
	</div>
	
	
	
		<div th:replace="~{ common/footer.html :: footer }"></div>
	
	
	<script th:inline="javascript">
	imageModal();
	function imageModal(){
		const gallery = document.getElementById('image-gallery');
        const images = document.getElementsByClassName('image-container');
        const modal = new bootstrap.Modal(document.getElementById('imageModal'));
        const carouselIndicators = document.querySelector('.carousel-indicators');
        const carouselInner = document.querySelector('.carousel-inner');

        images.forEach((img, index) => {
            const indicator = document.createElement('button');
            indicator.type = 'button';
            indicator.setAttribute('data-bs-target', '#carouselExampleIndicators');
            indicator.setAttribute('data-bs-slide-to', index);
            if (index === 0) indicator.classList.add('active');
            carouselIndicators.appendChild(indicator);

            const carouselItem = document.createElement('div');
            carouselItem.classList.add('carousel-item');
            if (index === 0) carouselItem.classList.add('active');

            const carouselImage = document.createElement('img');
            carouselImage.src = img.src;
            carouselImage.classList.add('d-block', 'w-100');
            carouselItem.appendChild(carouselImage);

            carouselInner.appendChild(carouselItem);

            img.addEventListener('click', () => {
                modal.show();
                $('#carouselExampleIndicators').carousel(index);
            });
        });

        if (images.length > 2) {
            for (let i = 2; i < images.length; i++) {
                images[i].parentElement.style.display = 'none';
            }

            const moreImages = document.createElement('div');
            moreImages.classList.add('more-images');
            moreImages.innerText = `더보기`;
            gallery.appendChild(moreImages);

            moreImages.addEventListener('click', () => {
                modal.show();
                $('#carouselExampleIndicators').carousel(2);
            });
        }
	}
		
		
		
		
		window.onload=()=>{
			
			///////////////////////////////////
			
			
			
			
			//imageModal();
			
			
			
			
			const sideMenus = document.getElementsByClassName('offcanvas-body')[0].children;
			for(const sideP of sideMenus){
				sideP.addEventListener('mouseover',function(){
					sideP.style.fontSize = 'large';
					sideP.style.textDecoration = 'underline';
				});
			}
			for(const sideP of sideMenus){
				sideP.addEventListener('mouseout',function(){
					sideP.style.fontSize = 'medium';
					sideP.style.textDecoration = 'none';
				});
			}
			for(const sideP of sideMenus){
				sideP.addEventListener('click',function(){
					console.log(this.innerText.split(' ')[1]);
					//location.href= 클릭한 것으로 구분
				});
			}
			
			
			const categories = document.getElementsByClassName("col-3");
			for(const cate of categories){
				cate.addEventListener('mouseover', function(){
					cate.children[0].style.borderRadius = '9999px';
					cate.children[0].style.backgroundColor = '#96caf0';
				});
				cate.addEventListener('mouseout', function(){
					cate.children[0].style.borderRadius = '0';
					cate.children[0].style.backgroundColor = 'white';
				});
/* 				if(${categorySelect} != null){
					if(${categorySelect} == cate.children[0].innerText){
						cate.children[0].style.borderRadius = '9999px';
						cate.children[0].style.backgroundColor = '#96caf0';
						
						선택되있는 카테고리에 동그라미 표시해두려고
						
					}
				} */
			}
			
		}
		
		
		
		
	</script>
	
	
	
</body>
</html>